"use strict";var players=[],result={},rwct='<div id=main_dialog class="ui-outputpanel ui-widget GS_output"><div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-shadow ui-draggable ui-overlay-visible" style="width: auto; height: auto; left: 713px; top: 15.5px; visibility: visible; z-index: 1005;" role=dialog aria-labelledby=dialog0_title aria-hidden=false aria-live=polite><div class="ui-dialog-titlebar ui-widget-header ui-helper-clearfix ui-corner-top ui-draggable-handle"><span id=dialog0_title class=ui-dialog-title>Результаты обработки</span><a href=# class="ui-dialog-titlebar-icon ui-dialog-titlebar-close ui-corner-all" role=button><span class="ui-icon ui-icon-closethick"/></a></div><div class="ui-dialog-content ui-widget-content" style="height: auto;"><table><thead><tr><td>имя</td><td colspan=6>каналы</td></thead><tbody class=process_result_container></tbody></table></div><div class="ui-dialog-footer ui-widget-content"></div></div></div>',rwlt="<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>",rwc=$(rwct).attr({id:"result_container"+(new Date).getTime()}).appendTo($("body")),sfb_id=$("#dialog0 button:eq(2)").attr("id"),wscb_id=$("#dialog0 input[type=checkbox]:first").attr("name");rwc.find(".ui-icon-closethick").click(function(a){$(a.target).parents(".ui-outputpanel").remove()});rwc.find(".ui-dialog").resizable();rwc=$(".process_result_container:last");$("td[role=gridcell] span").each(function(b,a){if(a.title.length){players.push(a.title)}});var counter=0,stopFlag=false;function collectData(a){if(stopFlag){return}var b={"javax.faces.partial.ajax":true};b["javax.faces.source"]=sfb_id;b["javax.faces.partial.execute"]="search_tab:player_search:search_form:input";b["javax.faces.partial.render"]="search_tab:player_search:search_form:output search_tab:player_search:search_form:messages";b[sfb_id]=sfb_id;b["search_tab:player_search:search_form"]="search_tab:player_search:search_form";b["search_tab:player_search:search_form:playerName"]=a;b[wscb_id]=3;b["javax.faces.ViewState"]=$("#search_tab\\:player_search\\:search_form [name=javax\\.faces\\.ViewState]").val();if(!a.length||typeof(a)!="string"){return}$.ajax({url:"http://chatmod.de.heroes-online.com/GIMPLI-ChatModWebsite/secure/main.faces",method:"post",async:true,headers:{Accept:"application/xml, text/xml, */*; q=0.01","Faces-Request":"partial/ajax"},data:b,success:function(q,o,n){var g={};var h=n.responseXML.firstChild.firstChild.childNodes[1].firstChild.nodeValue;var m=$(h);console.log(m.find("#search_tab\\:player_search\\:search_form\\:online"));if(m.find("#search_tab\\:player_search\\:search_form\\:online").html()=="false"){result[a]={online_status:false};return}result[a]={online_status:true,channels:[]};var c;try{c=m.find("#search_tab\\:player_search\\:search_form\\:channels").html().split("<br>")}catch(j){console.log(m);return}if(!c.length){return}var k=$(rwlt).appendTo(rwc);k.find("td:eq(0)").html(a);for(var f in c){var p=c[f];p=p.trim();if(!p.length){return}var d=p.split("_"),l=(new Number(d[0]))+1;result[a].channels.push(p);k.find("td:eq("+l+")").html(p)}},error:function(){},complete:function(){collectData(players[++counter])}})}collectData(players[0]);